"use strict";
var trun = require('../lib');
var run = trun.wrapped.run;
var apply = trun.wrapped.apply;
var print = trun.wrapped.print;
var args = trun.resolvable.args;

var runner = new trun.Runner();
runner.addTasks({
	default:
		'dev',

	dev: [
		apply('hello', args),
		'compile',
		'run'
	],

	hello:
		print('hello ', args.cmdArgs),

	compile:
		print('compiling...'),

	run: function (cb) {
		// do something useful
		this.runTasks([
			// using wrapped tasks within custom function
			run('echo ', args)
		], ['running'], cb);
	},

	otherTask:
		print('otherTask says: ', args.get(0)),

	sometask: [
		'hello',
		function () {
			var args = this.getArgs(arguments);
			var cb = this.getCb(arguments);
			this.print('sometask is called with arguments: ', this.toCmdArgs(args));
			this.tasks.otherTask('hi there', cb);
		}
	]
});
runner.start();
