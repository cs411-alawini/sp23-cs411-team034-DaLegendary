"use strict";
var inherits = require('util').inherits;
var WrappedTask = require('./core/wrapped_task');


var Run = function (args, options) {
	WrappedTask.call(this);
	this.args = args;
	this.options = options || {}; // doPrint, doTry
};
inherits(Run, WrappedTask);

Run.prototype.run = function (runner, ctx, cb) {
	var cmd = runner.createCmd(this.args, ctx);
	if (this.options.doPrint) {
		runner.printCmd(cmd);
	}
	runner.runCmd(cmd, this.options.doTry, cb);
};

Run.run = function () {
	return new Run(Array.prototype.slice.call(arguments));
};

Run.tryRun = function () {
	return new Run(Array.prototype.slice.call(arguments), { doTry: true });
};

Run.prun = function () {
	return new Run(Array.prototype.slice.call(arguments), { doPrint: true });
};

Run.tryPrun = function () {
	return new Run(Array.prototype.slice.call(arguments), { doTry: true, doPrint: true });
};


module.exports = Run;
