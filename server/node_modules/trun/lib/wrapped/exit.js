"use strict";
var inherits = require('util').inherits;
var Resolvable = require('../resolvable/core/resolvable');
var ExitErr = require('../errors').Exit;
var WrappedTask = require('./core/wrapped_task');


var Exit = function (code) {
	WrappedTask.call(this);
	this.code = code;
};
inherits(Exit, WrappedTask);

Exit.prototype.run = function (runner, ctx, cb) {
	var code = this.code;
	if (code instanceof Resolvable) {
		code = code.resolve(runner, ctx);
	}
	cb(new ExitErr(code));
};

Exit.exit = function (code) {
	return new Exit(code);
};


module.exports = Exit;
